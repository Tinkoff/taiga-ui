@import '@taiga-ui/core/styles/taiga-ui-local';

:host {
    .transition(~'background, box-shadow');
    position: relative;
    appearance: none;
    cursor: pointer;
    margin: 0;
    outline: none;

    &:disabled {
        pointer-events: none;

        &:not(._readonly) {
            opacity: var(--tui-disabled-opacity);
        }
    }

    &:focus-visible {
        box-shadow: inset 0 0 0 0.125rem var(--tui-focus) !important;
    }

    &[data-platform='ios'] {
        height: 1.9375rem;
        width: 3.1875rem;
        border-radius: 2rem;
        color: var(--tui-text-01-night);
        background: var(--tui-base-04);

        &:after {
            .transition(~'transform, width');
            content: '';
            display: block;
            width: 1.9375rem;
            height: 1.9375rem;
            border-radius: 2rem;
            background: currentColor;
            transform: scale(0.871);
            box-shadow:
                0 0.25rem 0.125rem rgba(0, 0, 0, 0.06),
                0 0.25rem 0.5rem rgba(0, 0, 0, 0.15);
        }

        &:active:after {
            width: 2.3rem;
        }

        &:checked {
            background: var(--tui-accent);

            &:after {
                transform: scale(0.871) translateX(1.44rem);
            }

            &:active:after {
                transform: scale(0.871) translateX(1.0775rem);
            }
        }

        &._invalid {
            background: var(--tui-error-bg);

            &:checked {
                background: var(--tui-error-fill);
            }
        }
    }

    &[data-platform='android'] {
        .transition(~'color, opacity');
        height: 1.25rem;
        width: 2.5rem;
        color: var(--tui-base-05);
        background: transparent;

        &:before {
            content: '';
            display: block;
            height: 100%;
            border: 0.1875rem solid transparent;
            box-sizing: border-box;
            border-radius: 2rem;
            background: currentColor;
            background-clip: content-box;
            opacity: 0.5;
        }

        &:after {
            .transition(transform);
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 1.25rem;
            height: 1.25rem;
            border-radius: 100%;
            background: #ececec;
            box-shadow:
                0 0.0625rem 0.0625rem rgba(0, 0, 0, 0.24),
                0 0 0.0625rem rgba(0, 0, 0, 0.12),
                inset 0 0.0625rem rgba(255, 255, 255, 0.12);
        }

        &:checked {
            color: var(--tui-accent);

            &:after {
                background: currentColor;
                transform: translateX(1.25rem);
            }
        }

        &._invalid {
            color: var(--tui-error-fill);

            &:not(:checked) {
                opacity: 0.4;
            }

            &:after {
                background: var(--tui-error-fill);
            }
        }
    }

    &[data-platform='web'] {
        width: 3rem;
        height: 1.5rem;
        border-radius: 2rem;
        color: var(--tui-primary-text);
        overflow: hidden;

        &:checked {
            background: var(--tui-primary);

            &:hover {
                background: var(--tui-primary-hover);
            }

            &:active {
                background: var(--tui-primary-active);
            }
        }

        &:not(:checked) {
            background: var(--tui-secondary);

            &:hover {
                background: var(--tui-secondary-hover);
            }

            &:active {
                background: var(--tui-secondary-active);
            }

            &[data-mode='onDark'] {
                background: var(--tui-clear-inverse);

                &:hover {
                    background: var(--tui-clear-inverse-hover);
                }

                &:active {
                    background: var(--tui-clear-inverse-hover);
                }
            }
        }

        &:before,
        &:after {
            .transition(transform);
            content: '';
            position: absolute;
            height: 100%;
            width: 1.5rem;
        }

        &:before {
            display: none;
            background: currentColor;
            mask: var(--t-mask) no-repeat center;
            transform: translateX(-1.5rem);
        }

        &:after {
            right: 0;
            border-radius: 100%;
            transform: scale(0.5);
            box-shadow: -3rem 0 0 0.25rem var(--tui-text-01-night);
        }

        &:checked:before {
            transform: none;
        }

        &:checked:after {
            transform: scale(0.5) translateX(3rem);
        }

        &[data-size='s'] {
            height: 1rem;
            width: 2rem;

            &:before {
                width: 1rem;
                transform: translateX(-1rem) scale(0.875);
            }

            &:after {
                width: 1rem;
                box-shadow: -2rem 0 0 0.25rem var(--tui-text-01-night);
            }

            &:checked:before {
                transform: scale(0.875);
            }

            &:checked:after {
                transform: scale(0.5) translateX(2rem);
            }
        }

        &._invalid {
            background: var(--tui-error-bg);

            &:hover,
            &:active {
                background: var(--tui-error-bg-hover);
            }

            &:checked {
                background: var(--tui-error-fill);
            }

            &[data-mode='onDark'] {
                background: var(--tui-error-bg-night);

                &:hover,
                &:active {
                    background: var(--tui-error-bg-night-hover);
                }

                &:checked {
                    background: var(--tui-error-fill-night);
                }
            }
        }

        &._icons {
            &:before {
                display: block;
            }

            &:after {
                box-shadow:
                    inset 0 0 0 0.25rem var(--tui-clear-active),
                    -3rem 0 0 0.25rem var(--tui-text-01-night);
            }

            &[data-size='s']:after {
                box-shadow:
                    inset 0 0 0 0.125rem var(--tui-clear-active),
                    -2rem 0 0 0.25rem var(--tui-text-01-night);
            }
        }
    }
}
