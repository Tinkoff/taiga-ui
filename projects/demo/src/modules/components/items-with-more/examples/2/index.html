<tui-items-with-more
    tuiGroup
    [collapsed]="true"
>
    <ng-container *ngFor="let item of items; let index = index">
        <label
            *tuiItem
            appearance=""
            tuiBlock="m"
            [style.border-radius]="'inherit'"
        >
            {{ item }}
            <input
                tuiBlock
                type="checkbox"
                [(ngModel)]="value[index]"
            />
        </label>
    </ng-container>
    <ng-template
        let-lastIndex
        tuiMore
    >
        <tui-hosted-dropdown
            tuiDropdownAlign="right"
            class="item"
            [content]="dropdown"
        >
            <button
                appearance="whiteblock"
                size="m"
                tuiButton
                type="button"
                class="item"
            >
                More
                <tui-badge class="tui-space_left-2">{{ items.length - lastIndex - 1 }}</tui-badge>
            </button>
            <ng-template #dropdown>
                <tui-data-list size="l">
                    <ng-container *ngFor="let item of items; let index = index">
                        <button
                            *ngIf="index > lastIndex"
                            tuiOption
                            (click)="value[index] = !value[index]"
                        >
                            {{ item }}
                            <tui-svg
                                src="tuiIconCheck"
                                class="tui-space_left-2"
                                [class._hidden]="!value[index]"
                            ></tui-svg>
                        </button>
                    </ng-container>
                </tui-data-list>
            </ng-template>
        </tui-hosted-dropdown>
    </ng-template>
</tui-items-with-more>
