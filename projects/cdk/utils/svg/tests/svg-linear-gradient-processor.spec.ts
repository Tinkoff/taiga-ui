import {tuiSvgLinearGradientProcessor} from '@taiga-ui/cdk';

describe(`svgLinearGradientProcessor`, () => {
    it(`correct replacing ids`, () => {
        const svg = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="64px" height="64px"><linearGradient
        id="r4wzZI4nTYpRSYqL7WQ95a"
        x1="37"
        x2="37"
        y1="14.5"
        y2="19.332"
        gradientUnits="userSpaceOnUse"
        spreadMethod="reflect"
    ><stop offset="0" stop-color="currentColor" /><stop offset="1" stop-color="currentColor" /></linearGradient><path
        fill="url(#r4wzZI4nTYpRSYqL7WQ95a)"
        d="M37 14.854A2 2 0 1 0 37 18.854A2 2 0 1 0 37 14.854Z"
    /><linearGradient
        id="r4wzZI4nTYpRSYqL7WQ95b"
        x1="27"
        x2="27"
        y1="14.5"
        y2="19.332"
        gradientUnits="userSpaceOnUse"
        spreadMethod="reflect"
    ><stop offset="0" stop-color="currentColor" /><stop offset="1" stop-color="currentColor" /></linearGradient><path
        fill="url(#r4wzZI4nTYpRSYqL7WQ95b)"
        d="M27 14.854A2 2 0 1 0 27 18.854A2 2 0 1 0 27 14.854Z"
    /><linearGradient
        id="r4wzZI4nTYpRSYqL7WQ95c"
        x1="32"
        x2="32"
        y1="5.25"
        y2="59.232"
        gradientUnits="userSpaceOnUse"
        spreadMethod="reflect"
    ><stop offset="0" stop-color="currentColor" /><stop offset="1" stop-color="currentColor" /></linearGradient><path
        fill="url(#r4wzZI4nTYpRSYqL7WQ95c)"
        d="M49,22h-2h-0.049c-0.284-4.495-2.458-8.387-5.765-10.919l3.521-3.521l-1.414-1.414 l-3.807,3.807C37.293,8.713,34.747,8,32,8s-5.294,0.713-7.486,1.953l-3.807-3.807l-1.414,1.414l3.521,3.521 c-3.307,2.532-5.48,6.424-5.765,10.919H17h-2c-2.243,0-4,1.692-4,3.854v13c0,2.206,1.794,4,4,4c0.732,0,1-0.212,2-0.556v1.556 c0,2.438,2,4.545,4,5.038v4.962c0,2.206,1.794,4,4,4s4-1.794,4-4V49h6v4.854c0,2.206,1.794,4,4,4s4-1.794,4-4v-4.962 c2-0.492,4-2.599,4-5.038v-1.556c1,0.344,1.268,0.556,2,0.556c2.206,0,4-1.794,4-4v-13C53,23.692,51.243,22,49,22z M32,10 c6.953,0,12.469,5.194,12.964,12H19.036C19.531,15.194,25.047,10,32,10z M15,40.854c-1.103,0-2-0.897-2-2v-13 C13,24.797,13.859,24,15,24h2v14.854C17,39.956,16.103,40.854,15,40.854z M27,53.854c0,1.103-0.897,2-2,2s-2-0.897-2-2V49h4V53.854z M39,55.854c-1.103,0-2-0.897-2-2V49h4v4.854C41,54.956,40.103,55.854,39,55.854z M45,43.854C45,45.56,43.626,47,42,47H22 c-1.626,0-3-1.44-3-3.146v-5V24h26v14.854V43.854z M51,38.854c0,1.103-0.897,2-2,2s-2-0.897-2-2V24h2c1.141,0,2,0.797,2,1.854 V38.854z"
    /></svg>
`;

        expect(tuiSvgLinearGradientProcessor(svg, `MOCK_ID`))
            .toEqual(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="64px" height="64px"><linearGradient
        id="r4wzZI4nTYpRSYqL7WQ95a_MOCK_ID"
        x1="37"
        x2="37"
        y1="14.5"
        y2="19.332"
        gradientUnits="userSpaceOnUse"
        spreadMethod="reflect"
    ><stop offset="0" stop-color="currentColor" /><stop offset="1" stop-color="currentColor" /></linearGradient><path
        fill="url(#r4wzZI4nTYpRSYqL7WQ95a_MOCK_ID)"
        d="M37 14.854A2 2 0 1 0 37 18.854A2 2 0 1 0 37 14.854Z"
    /><linearGradient
        id="r4wzZI4nTYpRSYqL7WQ95b_MOCK_ID"
        x1="27"
        x2="27"
        y1="14.5"
        y2="19.332"
        gradientUnits="userSpaceOnUse"
        spreadMethod="reflect"
    ><stop offset="0" stop-color="currentColor" /><stop offset="1" stop-color="currentColor" /></linearGradient><path
        fill="url(#r4wzZI4nTYpRSYqL7WQ95b_MOCK_ID)"
        d="M27 14.854A2 2 0 1 0 27 18.854A2 2 0 1 0 27 14.854Z"
    /><linearGradient
        id="r4wzZI4nTYpRSYqL7WQ95c_MOCK_ID"
        x1="32"
        x2="32"
        y1="5.25"
        y2="59.232"
        gradientUnits="userSpaceOnUse"
        spreadMethod="reflect"
    ><stop offset="0" stop-color="currentColor" /><stop offset="1" stop-color="currentColor" /></linearGradient><path
        fill="url(#r4wzZI4nTYpRSYqL7WQ95c_MOCK_ID)"
        d="M49,22h-2h-0.049c-0.284-4.495-2.458-8.387-5.765-10.919l3.521-3.521l-1.414-1.414 l-3.807,3.807C37.293,8.713,34.747,8,32,8s-5.294,0.713-7.486,1.953l-3.807-3.807l-1.414,1.414l3.521,3.521 c-3.307,2.532-5.48,6.424-5.765,10.919H17h-2c-2.243,0-4,1.692-4,3.854v13c0,2.206,1.794,4,4,4c0.732,0,1-0.212,2-0.556v1.556 c0,2.438,2,4.545,4,5.038v4.962c0,2.206,1.794,4,4,4s4-1.794,4-4V49h6v4.854c0,2.206,1.794,4,4,4s4-1.794,4-4v-4.962 c2-0.492,4-2.599,4-5.038v-1.556c1,0.344,1.268,0.556,2,0.556c2.206,0,4-1.794,4-4v-13C53,23.692,51.243,22,49,22z M32,10 c6.953,0,12.469,5.194,12.964,12H19.036C19.531,15.194,25.047,10,32,10z M15,40.854c-1.103,0-2-0.897-2-2v-13 C13,24.797,13.859,24,15,24h2v14.854C17,39.956,16.103,40.854,15,40.854z M27,53.854c0,1.103-0.897,2-2,2s-2-0.897-2-2V49h4V53.854z M39,55.854c-1.103,0-2-0.897-2-2V49h4v4.854C41,54.956,40.103,55.854,39,55.854z M45,43.854C45,45.56,43.626,47,42,47H22 c-1.626,0-3-1.44-3-3.146v-5V24h26v14.854V43.854z M51,38.854c0,1.103-0.897,2-2,2s-2-0.897-2-2V24h2c1.141,0,2,0.797,2,1.854 V38.854z"
    /></svg>
`);

        expect(
            tuiSvgLinearGradientProcessor(
                `<svg xmlns="http://www.w3.org/2000/svg" width="440" height="232" viewBox="0 0 440 232" fill="none">
    <mask id="path-1-outside-1" maskUnits="userSpaceOnUse" x="-2" y="-2" width="444" height="235" fill="black">
        <rect fill="white" x="-2" y="-2" width="444" height="235"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M440 4C440 1.79086 438.209 0 436 0H4C1.79086 0 0 1.79087 0 4.00001V227C0 229.209 1.79086 231 4 231H436C438.209 231 440 229.209 440 227V4ZM117 4.00195C112.582 4.00195 109 7.58367 109 12.002V219.002C109 223.42 112.582 227.002 117 227.002H324C328.418 227.002 332 223.42 332 219.002V12.002C332 7.58368 328.418 4.00195 324 4.00195H117Z"/>
    </mask>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M440 4C440 1.79086 438.209 0 436 0H4C1.79086 0 0 1.79087 0 4.00001V227C0 229.209 1.79086 231 4 231H436C438.209 231 440 229.209 440 227V4ZM117 4.00195C112.582 4.00195 109 7.58367 109 12.002V219.002C109 223.42 112.582 227.002 117 227.002H324C328.418 227.002 332 223.42 332 219.002V12.002C332 7.58368 328.418 4.00195 324 4.00195H117Z" fill="black" fill-opacity="0.24"/>
    <path d="M4 2H436V-2H4V2ZM2 227V4.00001H-2V227H2ZM436 229H4V233H436V229ZM438 4V227H442V4H438ZM111 12.002C111 8.68824 113.686 6.00195 117 6.00195V2.00195C111.477 2.00195 107 6.4791 107 12.002H111ZM111 219.002V12.002H107V219.002H111ZM117 225.002C113.686 225.002 111 222.316 111 219.002H107C107 224.525 111.477 229.002 117 229.002V225.002ZM324 225.002H117V229.002H324V225.002ZM330 219.002C330 222.316 327.314 225.002 324 225.002V229.002C329.523 229.002 334 224.525 334 219.002H330ZM330 12.002V219.002H334V12.002H330ZM324 6.00195C327.314 6.00195 330 8.68825 330 12.002H334C334 6.47911 329.523 2.00195 324 2.00195V6.00195ZM117 6.00195H324V2.00195H117V6.00195ZM436 233C439.314 233 442 230.314 442 227H438C438 228.105 437.105 229 436 229V233ZM-2 227C-2 230.314 0.686285 233 4 233V229C2.89543 229 2 228.105 2 227H-2ZM436 2C437.105 2 438 2.89543 438 4H442C442 0.686294 439.314 -2 436 -2V2ZM4 -2C0.686287 -2 -2 0.686302 -2 4.00001H2C2 2.89543 2.89543 2 4 2V-2Z" fill="white" mask="url(#path-1-outside-1)"/>
</svg>`,
                `MOCK_ID`,
            ),
        )
            .toEqual(`<svg xmlns="http://www.w3.org/2000/svg" width="440" height="232" viewBox="0 0 440 232" fill="none">
    <mask id="path-1-outside-1_MOCK_ID" maskUnits="userSpaceOnUse" x="-2" y="-2" width="444" height="235" fill="black">
        <rect fill="white" x="-2" y="-2" width="444" height="235"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M440 4C440 1.79086 438.209 0 436 0H4C1.79086 0 0 1.79087 0 4.00001V227C0 229.209 1.79086 231 4 231H436C438.209 231 440 229.209 440 227V4ZM117 4.00195C112.582 4.00195 109 7.58367 109 12.002V219.002C109 223.42 112.582 227.002 117 227.002H324C328.418 227.002 332 223.42 332 219.002V12.002C332 7.58368 328.418 4.00195 324 4.00195H117Z"/>
    </mask>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M440 4C440 1.79086 438.209 0 436 0H4C1.79086 0 0 1.79087 0 4.00001V227C0 229.209 1.79086 231 4 231H436C438.209 231 440 229.209 440 227V4ZM117 4.00195C112.582 4.00195 109 7.58367 109 12.002V219.002C109 223.42 112.582 227.002 117 227.002H324C328.418 227.002 332 223.42 332 219.002V12.002C332 7.58368 328.418 4.00195 324 4.00195H117Z" fill="black" fill-opacity="0.24"/>
    <path d="M4 2H436V-2H4V2ZM2 227V4.00001H-2V227H2ZM436 229H4V233H436V229ZM438 4V227H442V4H438ZM111 12.002C111 8.68824 113.686 6.00195 117 6.00195V2.00195C111.477 2.00195 107 6.4791 107 12.002H111ZM111 219.002V12.002H107V219.002H111ZM117 225.002C113.686 225.002 111 222.316 111 219.002H107C107 224.525 111.477 229.002 117 229.002V225.002ZM324 225.002H117V229.002H324V225.002ZM330 219.002C330 222.316 327.314 225.002 324 225.002V229.002C329.523 229.002 334 224.525 334 219.002H330ZM330 12.002V219.002H334V12.002H330ZM324 6.00195C327.314 6.00195 330 8.68825 330 12.002H334C334 6.47911 329.523 2.00195 324 2.00195V6.00195ZM117 6.00195H324V2.00195H117V6.00195ZM436 233C439.314 233 442 230.314 442 227H438C438 228.105 437.105 229 436 229V233ZM-2 227C-2 230.314 0.686285 233 4 233V229C2.89543 229 2 228.105 2 227H-2ZM436 2C437.105 2 438 2.89543 438 4H442C442 0.686294 439.314 -2 436 -2V2ZM4 -2C0.686287 -2 -2 0.686302 -2 4.00001H2C2 2.89543 2.89543 2 4 2V-2Z" fill="white" mask="url(#path-1-outside-1_MOCK_ID)"/>
</svg>`);
    });

    it(`ignore hex color`, () => {
        const svg = `<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 512 512">
 <!-- Created with Method Draw - http://github.com/duopixel/Method-Draw/ -->

 <g>
  <title>background</title>
  <rect fill="none" id="canvas_background" height="514" width="514" y="-1" x="-1"/>
  <g display="none" id="canvasGrid">
   <rect fill="url(#gridpattern)" stroke-width="0" y="0" x="0" height="100%" width="100%" id="svg_1"/>
  </g>
 </g>
 <g>
  <title>Layer 1</title>
  <style type="text/css">.st0{fill:#2190e4;}
\t.st1{fill:#1d85d4;}
\t.st2{fill:#FFFFFF;}</style>
  <g stroke="null" id="svg_8">
   <g stroke="null" transform="matrix(2.5122204305161695,0,0,2.5122204305161695,-1123.5039578168125,-1123.4669114951682) " id="svg_5">
    <polygon stroke="null" id="svg_6" points="549.31640625,448.91835513710976 549.31640625,448.91835513710976 549.31640625,448.91835513710976 456.2164001464844,482.118367344141 470.4164123535156,605.2183429300785 549.31640625,648.9183551371098 549.31640625,648.9183551371098 549.31640625,648.9183551371098 628.2164306640625,605.2183429300785 642.4164428710938,482.118367344141 " class="st0"/>
    <polygon stroke="null" id="svg_7" points="549.31640625,448.91835513710976 549.31640625,471.118367344141 549.31640625,471.0183612406254 549.31640625,572.3183795511723 549.31640625,572.3183795511723 549.31640625,648.9183551371098 549.31640625,648.9183551371098 628.2164306640625,605.2183429300785 642.4164428710938,482.118367344141 549.31640625,448.91835513710976 " class="st1"/>
   </g>
  </g>
  <g stroke="null" id="svg_18">
   <path fill="#ffffff" stroke="null" id="svg_16" d="m257.249495,192.912241c-21.146608,0 -38.35198,17.205371 -38.35198,38.35198c0,21.148462 17.205372,38.353834 38.35198,38.353834c21.148462,0 38.353834,-17.205371 38.353834,-38.353834c0,-21.146609 -17.205372,-38.35198 -38.353834,-38.35198zm0,0"/>
   <path fill="#ffffff" stroke="null" id="svg_17" d="m257.249495,145.793512c-49.104179,0 -89.052304,39.948125 -89.052304,89.052304c0,22.557371 14.213294,54.428371 42.246871,94.728723c20.490353,29.45917 40.643311,52.255685 41.492364,53.21226l5.313069,5.99157l5.314923,-5.99157c0.847199,-0.956575 21.000156,-23.75309 41.492364,-53.21226c28.031723,-40.300353 42.246871,-72.171352 42.246871,-94.728723c0,-49.104179 -39.949979,-89.052304 -89.054158,-89.052304zm0,138.030422c-28.980883,0 -52.557858,-23.57883 -52.557858,-52.559713s23.576976,-52.557859 52.557858,-52.557859c28.982737,0 52.559713,23.576976 52.559713,52.557859s-23.576976,52.559713 -52.559713,52.559713zm0,0"/>
  </g>
 </g>
</svg>`;

        expect(tuiSvgLinearGradientProcessor(svg, `MOCK_ID`))
            .toEqual(`<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 512 512">
 <!-- Created with Method Draw - http://github.com/duopixel/Method-Draw/ -->

 <g>
  <title>background</title>
  <rect fill="none" id="canvas_background" height="514" width="514" y="-1" x="-1"/>
  <g display="none" id="canvasGrid">
   <rect fill="url(#gridpattern_MOCK_ID)" stroke-width="0" y="0" x="0" height="100%" width="100%" id="svg_1"/>
  </g>
 </g>
 <g>
  <title>Layer 1</title>
  <style type="text/css">.st0{fill:#2190e4;}
\t.st1{fill:#1d85d4;}
\t.st2{fill:#FFFFFF;}</style>
  <g stroke="null" id="svg_8">
   <g stroke="null" transform="matrix(2.5122204305161695,0,0,2.5122204305161695,-1123.5039578168125,-1123.4669114951682) " id="svg_5">
    <polygon stroke="null" id="svg_6" points="549.31640625,448.91835513710976 549.31640625,448.91835513710976 549.31640625,448.91835513710976 456.2164001464844,482.118367344141 470.4164123535156,605.2183429300785 549.31640625,648.9183551371098 549.31640625,648.9183551371098 549.31640625,648.9183551371098 628.2164306640625,605.2183429300785 642.4164428710938,482.118367344141 " class="st0"/>
    <polygon stroke="null" id="svg_7" points="549.31640625,448.91835513710976 549.31640625,471.118367344141 549.31640625,471.0183612406254 549.31640625,572.3183795511723 549.31640625,572.3183795511723 549.31640625,648.9183551371098 549.31640625,648.9183551371098 628.2164306640625,605.2183429300785 642.4164428710938,482.118367344141 549.31640625,448.91835513710976 " class="st1"/>
   </g>
  </g>
  <g stroke="null" id="svg_18">
   <path fill="#ffffff" stroke="null" id="svg_16" d="m257.249495,192.912241c-21.146608,0 -38.35198,17.205371 -38.35198,38.35198c0,21.148462 17.205372,38.353834 38.35198,38.353834c21.148462,0 38.353834,-17.205371 38.353834,-38.353834c0,-21.146609 -17.205372,-38.35198 -38.353834,-38.35198zm0,0"/>
   <path fill="#ffffff" stroke="null" id="svg_17" d="m257.249495,145.793512c-49.104179,0 -89.052304,39.948125 -89.052304,89.052304c0,22.557371 14.213294,54.428371 42.246871,94.728723c20.490353,29.45917 40.643311,52.255685 41.492364,53.21226l5.313069,5.99157l5.314923,-5.99157c0.847199,-0.956575 21.000156,-23.75309 41.492364,-53.21226c28.031723,-40.300353 42.246871,-72.171352 42.246871,-94.728723c0,-49.104179 -39.949979,-89.052304 -89.054158,-89.052304zm0,138.030422c-28.980883,0 -52.557858,-23.57883 -52.557858,-52.559713s23.576976,-52.557859 52.557858,-52.557859c28.982737,0 52.559713,23.576976 52.559713,52.557859s-23.576976,52.559713 -52.559713,52.559713zm0,0"/>
  </g>
 </g>
</svg>`);
    });
});
