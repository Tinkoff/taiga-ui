<ng-container *ngIf="items.changes | async" />
<ng-container *tuiLet="(lastVisibleIndex$ | async) || 0 as lastIndex">
    <div
        *ngFor="let item of items; let index = index"
        class="t-item"
        [class.t-item_hidden]="index > lastIndex && index !== directive.required"
    >
        <ng-container *ngTemplateOutlet="item" />
    </div>
    <span
        *ngIf="more && lastIndex < items.length - 1"
        class="t-item"
        [class.t-item_hidden]="lastIndex >= items.length - 1"
    >
        <ng-container
            [ngTemplateOutlet]="more"
            [ngTemplateOutletContext]="{$implicit: lastIndex}"
        />
    </span>
</ng-container>
