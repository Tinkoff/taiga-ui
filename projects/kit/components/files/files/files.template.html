<ng-container *ngIf="items?.changes | async" />
<ng-content />
<ng-container *ngFor="let item of items; let index = index">
    <ng-container
        *ngIf="!max || index < max"
        [ngTemplateOutlet]="item"
    />
</ng-container>
<tui-expand
    *ngIf="hasExtraItems"
    [expanded]="expanded"
>
    <div class="t-extra-items">
        <ng-container *ngFor="let item of items; let index = index">
            <ng-container
                *ngIf="max && index >= max"
                [ngTemplateOutlet]="item"
            />
        </ng-container>
    </div>
</tui-expand>
<div
    *ngIf="hasExtraItems"
    class="t-bottom"
    [class.t-bottom_collapsed]="!expanded"
>
    <button
        appearance="outline"
        size="m"
        tuiButton
        type="button"
        class="t-button"
        (click)="toggle()"
    >
        {{ (expanded ? hideText$ : showAllText$) | async }}
    </button>
</div>
